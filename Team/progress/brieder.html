<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
This is an example weekly progress report document that team members can use to report their individual progress 
of their ECE477 senior design projects. Weekly progress reports are expected to follow the general guidelines
presented in the "Progress Report Policy" document, available online at https://engineering.purdue.edu/ece477/Course/Policies/policies.html

Please create 4 copies of this example, renaming each copy to <PurdueID>.html, where <PurdueID> corresponds to
the Purdue ITAP Career Account ID given by Purdue to each individual team member. If you have any questions,
contact course staff.
-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<!--Reconfigurable base tag; used to modify the site root location for root-relative links-->
<base href="https://engineering.purdue.edu/477grp12/" />

<!--Content-->
<title>ECE477 Course Documents</title>
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="author" content="Brian Rieder">
<meta name = "format-detection" content = "telephone=no" />
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!--CSS-->
<link rel="stylesheet" href="css/default.css" type="text/css" media="all" />
<link rel="stylesheet" href="css/responsive.css">
<link rel="stylesheet" href="css/styles.css">
<link rel="stylesheet" href="css/content.css">
<!--[if IE 6]>
<link href="default_ie6.css" rel="stylesheet" type="text/css" />
<![endif]-->
<style>
  a.weeklink:hover {
    color: black !important;
  }

  a.weeklink {
    text-decoration: none;
  }
</style>

</head>
<body>
<div id="wrapper_site">
    <div id="wrapper_page">
	<!-- Instantiate global site header.-->
	<div id="header"></div>
		<!-- Instantiate site global navigation bar.-->
		<div id="menu"></div>
	
		<!-- Instantiate a page banner image. Page banner images should be 1100x350px and should be located within the local
			img folder located at this directory level. -->
		<div id="banner">
			<img src="Files/img/BannerImgExample.jpg"></img>
		</div>
	
		<!-- Instantiate "tools" needed for a page. Tools are premade functional blocks that can be used to build a page,
			and include things such as a file lister (for listing out homework assignments or tutorials)
		-->
		<div id="content">
            <h2>Progress Report for Brian Rieder</h2>

            <!--
            <div id="week1">
                <h4>Week 1:</h4>
            </div>
            <b>Date:</b> -Enter today's date here-<br>
            <b>Total hours:</b> -Enter the number of hours you worked this week here-<br>
            <b>Description of design efforts:</b><br>
            -Discuss your design efforts here. Remember to follow the guidelines presented in the Progress Report Policy, available <a href="https://engineering.purdue.edu/ece477/Course/Policies/">here</a>. This is a template entry; simply copy/paste this entry when doing progress reports each week.</br>
            -->
            <div class="bar" style="background-color: white; border: 2px solid black">
                <h4>Week:</h4>
                <ul>
                    <li> <h4> <a class="weeklink" href="Team/progress/brieder.html#week2">2</a> </h4> </li>
                    <li> <h4> <a class="weeklink" href="Team/progress/brieder.html#week3">3</a> </h4> </li>
                    <li> <h4> <a class="weeklink" href="Team/progress/brieder.html#week4">4</a> </h4> </li>
                    <li> <h4> <a class="weeklink" href="Team/progress/brieder.html#week5">5</a> </h4> </li>
                    <!-- <li> <h4> <a class="weeklink" href="Team/progress/brieder.html#week6">6</a> </h4> </li> -->
                    <!-- <li> <h4> <a class="weeklink" href="Team/progress/brieder.html#week7">7</a> </h4> </li> -->
                    <!-- <li> <h4> <a class="weeklink" href="Team/progress/brieder.html#week8">8</a> </h4> </li> -->
                    <!-- <li> <h4> <a class="weeklink" href="Team/progress/brieder.html#week9">9</a> </h4> </li> -->
                    <!-- <li> <h4> <a class="weeklink" href="Team/progress/brieder.html#week10">10</a> </h4> </li> -->
                    <!-- <li> <h4> <a class="weeklink" href="Team/progress/brieder.html#week11">11</a> </h4> </li> -->
                    <!-- <li> <h4> <a class="weeklink" href="Team/progress/brieder.html#week12">12</a> </h4> </li> -->
                    <!-- <li> <h4> <a class="weeklink" href="Team/progress/brieder.html#week13">13</a> </h4> </li> -->
                    <!-- <li> <h4> <a class="weeklink" href="Team/progress/brieder.html#week14">14</a> </h4> </li> -->
                    <!-- <li> <h4> <a class="weeklink" href="Team/progress/brieder.html#week15">15</a> </h4> </li> -->
                    <!-- <li> <h4> <a class="weeklink" href="Team/progress/brieder.html#week16">16</a> </h4> </li> -->
                </ul>
            </div>

            <div id="week2">
                <h4>Week 2:</h4>
            </div>
            <b>Date:</b> 19 January 2017 <br>
            <b>Total hours: </b> 9 <br>
            <b>Description of design efforts:</b><br>
            This week for me consisted primarily of configuration of the lab computer, a lot of discussion of potential plans and revisions that we needed to employ moving forward as a team, and the construction of the website. No physical construction of the product has started as of writing this progress report, but design changes have been discussed and plans to begin prototyping have been conceptualized.
            <br> <br>
            Configuring the computer was a simple but necessary task - we need a terminal to access various Linux utilities and we need an editor to... edit text files (such as those that comprise this website). As such, I installed Cygwin on the lab computer along with a number of utilities that we may need throughout the semester (scp, ssh, bash, etc.). I also installed Sublime Text as a text editor for the team and set configuration so that general formatting (i.e., tabs vs. spaces, tab width) could remain consistent regardless of who was editing the file.
            <br> <br>
            <div align="center">
            	<img style="float: left;" width="48%" src="Team/progress/img/BrianImg/CygwinInstalled.png">
            	<img style="float: right;" width="48%" src="Team/progress/img/BrianImg/SublimeConfigured.png">
            	<p style="clear: both;">
            </div>
            <br>
            Additionally, I set up the website (with enormous help from the template) to display team information, locate documents, and fix broken links. Organization and file structure of the site was the largest contribution to the time sink of setting it up. I also set up an organization on GitHub for the team with each of our members as contributors to the organization. I believe that utilizing a solid version control system is vital to the success of project organization, so I wanted to enforce the idea of git usage for the team. Configuring the project as an organization also allows compartmentalization of repositories so that specific components of the project (e.g., project website, phone app, microcontroller drivers) can remain separate.
            <br><br>
            Much of our discussion as a team this week went into prototyping - determining how we're going to develop our project without diving immediately into guitar modification and heavy construction. We came up with two specific needs for prototyping: note recognition and note display. As such, we discussed a mechanical system that puts tension on the strings that can be pressed down against metallic strips emulating "frets" in order to determine if we're properly recognizing pitches through a "switch array" of the strings and the frets forming a grid and contacts when pressed down. Additionally, prototyping for pitch display will consist of utilizing the microcontroller to drive a small array of LEDs to display effective notes - an exercise in displaying notes on an LED array without full construction of the product.

            <br>
            <br>
            
            <div id="week3">
                <h4>Week 3:</h4>
            </div>
            <b>Date:</b> 27 January 2017 <br>
            <b>Total hours:</b> 11 <br>
            <b>Description of design efforts:</b><br>
            My primary efforts this week fell within discussion of software design and architecture, part choosing, further general computer configuration, and continuing iteration on design choices we made for the project this week. 
            <br> <br>
            I had several discussions with Cole throughout the course of the week regarding what kind of format we should be storing data in as well as how we should progress through our modes of operations. Cole presented the idea of using a tree to encode notes as they should be sent to the guitar. As such, we came up with the idea of a binary tree where each edge is a bit in a representation that yields an encoding for every string/note combination. Since there are 132 possible string/note combinations on a 21-fret guitar (6*21 + 6 for open strings), we determined that we would need an 8-bit (255 entry) encoding of all notes. In order to dictate when to stop turning LEDs on and to wait for a response, we agreed that 8'hFF (all 1's) should be a 'stop' control signal. An example of a four-entry encoding is shown below and the full-size tree was agreed to be trivially feasible within C. 
            <br>
            Additionally, we discussed the flow of operation from a state machine design perspective in order to help him write the Software Overview. I created a state machine for him to work from pictured below that allows transitioning between song selection, mode selection, and the two currently intended modes. Within "LEARNING" mode, I proposed that as long as the song isn't finished, we should display the note, wait for input, and then transition based on the correctness of the note - a process that balances on our ability to turn vibrations from sensors into booleans and perform encoding on notes for analysis. The "REALTIME" mode is significantly simpler and only requires the reading of a note encoding as well as the interpretation of a numeric delay within the same type of 8-bit encoding discussed previously that accompanies every note. The exact implementation details of an encoding aren't set in stone yet, but the necessity has been acknowledged and Cole and I have been exchanging ideas regularly.
            <br> <br>
            <div align="center">
                <img style="" width="30%" src="Team/progress/img/BrianImg/ExampleEncoding.jpg">
                &nbsp;
                <img style="" width="30%" src="Team/progress/img/BrianImg/InitialStateDiagram.jpg">
                <p style="clear: both;">
            </div>
            <br>
            In addition to software design this week, I spent a significant amount of time researching Bluetooth modules for the component report and for our ultimate design. I decided that Serial Port Profile (SPP), a Bluetooth profile that allows connected devices to transmit and receive data as if there was a physical connection between them, was a necessity for our design, as Bluetooth is serving the purpose in our context of replacing a wired serial interface with a wireless one. After a lot of digging, I eliminated all but two Bluetooth modules which are discussed within the component analysis report: the Microchip Technology BM78 and the Silicon Labs BLE113-A-M256K. The BM78 supports SPP, utilizes BM78 and UART, and has an average sensitivity, moderately accessible supply, and the lowest price of the investigated components. The BLE113, however, has an explicitly listed data rate, interfaces with more serial options, and has lower voltage and current supply requirements. The decision has currently been to progress with the BM78, but the advantages of both options still need to be considered as a team.
            <br> <br>
            <div align="center">
                <img style="" width="60%" src="Team/progress/img/BrianImg/BluetoothChart.jpg">
                <p style="clear: both;">
            </div>
            <br>
            As we progress further through this design, we're coming to more and more conclusions about what is and isn't possible for us to implement on the guitar. We've had several roadblocks such as the shorting of powered strings across a finger that is being addressed through alternating power, the issue of the bridge shorting the entire system due to its conductive properties that is going to be attempted to be addressed by insulating each string using liquid rubber or heatshrink wrapping, and the placement of LEDs on the neck. We continue to make large design choices daily and all play devil's advocate in order to ensure that we're thinking of every detail with the project. Each of us play the role of providing alternate technical solutions to the problems we come up with which necessitates a significant amount of brainstorming time as a team at this junction. As such, a significant amount of personal contribution is done here - not only by me, but everyone on the team. I serve the role as the sole computer engineer and bring what electric design experience I have to the table to keep us on the forward path.

            <br>
            <br>

            <div id="week4">
                <h4>Week 4:</h4>
            </div>
            <b>Date:</b> 3 February 2017<br>
            <b>Total hours:</b> 10.5 <br>
            <b>Description of design efforts:</b><br>
            The primary design efforts for this week shifted away from the theoretical to the physical implementation details of the project. A prime example of this was the consideration of isolation of the bridge from the strings - a design detail that was required to prevent the shorting of the string-fret matrix that would render the device effectively useless. In order to address this issue, we purchased liquid rubber for the purpose of prototyping. As shown in the first image below, we stripped a wire, dipped it in the liquid rubber, let it dry overnight, and ensured that the non-insulated sides were still conductive by powering on an LED and that the rubber-dipped section was non-conductive and did not power on an LED. Despite this approach working, we feared that the liquid rubber would not retain fidelity when stretched and rubbed across the bridge as the guitar was used and tuned. To address this, we considered using heatshrink and, in the process, came across string sleeves designed to reduce string wear that do not audibly dampen vibration and are made of insulating material. As of the time of this progress report, these sleeves are in the mail and will be tested in the next week. These parts are reflected in the Bill of Materials that we completed this week as a team in order to sort our thoughts regarding what parts are necessary to create the project.
            <br> <br>
            <div align="center">
                <img style="" width="40%" src="Team/progress/img/BrianImg/IsolationTest.jpg">
                &nbsp;
                <img style="" width="40%" src="Team/progress/img/BrianImg/FretboardOptions.jpg">
                <p style="clear: both;">
            </div>
            <br>
            Another facet of physical design that we considered was the addressing of the mounting of the LEDs inside of the guitar neck. This week while considering how that implementation should be done, the idea that we could simply use a PCB in place of the fretboard came to mind. While this does introduce a slew of potential considerations, this would allow direct contact between the fret and the PCB, reducing wiring down the body of the neck, allow surface mounted LEDs to be seen without drilling out a fretboard, and, as an added bonus, allow the package to have a "tech-chic" look. We agreed that this idea could be the one that we ultimately use for our design, but know that there are several points that need to be considered: moisture, force, ESD, and electrical contact. As a human user would be touching a bare PCB, we discussed several options for isolation including conformative coating, a fret-wise plastic overlay, a custom printed fretboard case, and a full-neck plastic cover. While this decision is not currently set in stone, the use of the PCB as a fretboard with a plastic cover is the current course of action that is being pursued. The other consideration, however, with using the PCB as a fretboard was the cost associated. As a team, we considered the advantages and disadvantages of a full-neck PCB (cohesive unit, functional design, high cost) and of a several PCB fretboard (modular design, requires solder bridges, multiple failure points, lower cost) and ultimately decided on a modular PCB fretboard as cost was a determining factor.
            <br> <br>
            <div align="center">
                <img style="" width="40%" src="Team/progress/img/BrianImg/DevBoard.jpg">
                <p style="clear: both;">
            </div>
            <br>
            In order to continue prototyping from a software perspective, I also acquired a dev board for the PIC32MX570F512L from Joe, shown above. The current plan of action is to begin the learning curve of the board and to light up LEDs. The ultimate goal before next week is to have the board interact with the guitar via IO pins to light up LEDs through a small subset of the fret-string matrix. Cole and I have also begun discussing the development of the app to control the system and have decided to create an Android app using a common development environment in Android Studio.

            <br>

            <div id="week5">
                <h4>Week 5:</h4>
            </div>
            <b>Date:</b> 10 February 2017 <br>
            <b>Total hours:</b> 8 <br>
            <b>Description of design efforts:</b><br>
            Despite a nagging lack of time this week, our design decisions of the last few weeks have allowed us to divvy up various tasks across the team and to start moving in on creating a functional design. As such, Austin and Jen took control of electrical and mechanical construction (PCB design, mechanical considerations) while Cole and I took the reins on the digital and software design aspects (developing an app, figuring out the microcontroller).
            <br> <br>
            My primary task this week was configuring our computer for development on our development board, setting up the programming interface for the board, and programming the board with a test program to show that we can use it. I installed the MPLAB IDE and the XC32 compiler on the group computer and configured it to work with the PIC32MX570F512L so that we could program the development board through the ICD 3. I attempted to run an empty template and found that the installation was missing seemingly deprecated peripheral libraries that appear to be in the process of being phased out by Harmony. I still manually installed these packages and was able to get the board to program with a blank program. Now that the environment and the programming interface were configured, my two personal goals for the week were the creation of a basic LED driving library and finding out how to drive the LCD on the development board. The first of these two goals was completed rather handily as there is sample LED driving code for our specific chip. A demonstration of an LED shift demo program that I wrote is displayed in the GIF below. When I attempted to find the LCD driver, however, there was no sample code for our specific chip that I was able to find. I attempted to adapt other sample code for the PIC32 platform to do this, but was ultimately unable to do so this week. As of the writing of this report, driving the LCD is my current investigative effort.
            From the perspective of honest reporting, Harmony is still an enigma to me that I have to spend more time working with to understand. In the past, all development that I've done has been without a sort of "middleware" layer that performed translation that I'm not aware of. Getting to understand this is going to be a vital part of developing on the PIC32 platform.
            <br> <br>
            <div align="center">
                <img style="" width="40%" src="Team/progress/img/BrianImg/Dev_LEDProgrammed_Cropped.gif">
                <p style="clear: both;">
            </div>
            <br>

             This week, we wanted to do an analysis of the neck that we purchased for prototyping and testing. Unfortunately, I realized too late that the guitar neck that we had purchased was a Telecaster neck instead of a Stratocaster neck and we hit our first setback. Mechanically, we looked at two types of guitar: the Stratocaster (the guitar that we're using for this project) and a Telecaster (another Fender-based model that appears similar, but has several design differences. Both types of guitars' necks have a specific heel and bodies' have a specific neck pocket shape: the Strat has a rounded heel and a rounded pocket while the Tele has a flat-base heel and pocket. As shown in the image below, the Strat neck is compatible with both the Strat and Tele bodies, but the Tele neck is only compatible with the Tele body. This was the root of our issue - we'd purchased a Telecaster neck which CAN physically slot into the heel, but would not seat properly without a pocket-base gap and would cause the guitar to not intonate. As such, this experiment was abandoned while we order a proper neck.
            <br> <br>
            <div align="center">
                <img style="" width="70%" src="Team/progress/img/BrianImg/Heel_Pocket_Comparison.png">
                <p style="clear: both;">
            </div>
            <br>
                        
            As a team, we've made progress through Cole beginning development on the app, Austin and Jen handling hardware considerations and beginning to create base-level models of the stamp module and the final design. Progress is still continuing smoothly, but we need to make sure that everyone is on the same page consistently. Learning the rest of the toolchain for developing on PIC32 as a platform (namely with Harmony) is currently a daunting task - it's something where time still needs to be spent to understand it. I'm hoping to be able to write a small library to display debugging messages on the development board's LCD and have it drive external LEDs with GPIO pins. Prototyping needs to continue to occur - the microcontroller is a vital part of that progress.
            <br>

        </div>
	
		<!-- Instantiate global footer. Any changes to the footer should be made through the top-level file "footer.html" -->
		<div id="footer"></div>
    </div>
</div>

<!--JS-->
<script src="js/jquery.js"></script>
<script src="js/jquery-migrate-1.1.1.js"></script>

<script type="text/javascript">
$(document).ready(function() {
    $("#header").load("header.html");
	$("#menu").load("navbar.html");
	$("#footer").load("footer.html");
});
</script>
</body>
</html>
