<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
This is an example weekly progress report document that team members can use to report their individual progress 
of their ECE477 senior design projects. Weekly progress reports are expected to follow the general guidelines
presented in the "Progress Report Policy" document, available online at https://engineering.purdue.edu/ece477/Course/Policies/policies.html

Please create 4 copies of this example, renaming each copy to <PurdueID>.html, where <PurdueID> corresponds to
the Purdue ITAP Career Account ID given by Purdue to each individual team member. If you have any questions,
contact course staff.
-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<!--Reconfigurable base tag; used to modify the site root location for root-relative links-->
<base href="https://engineering.purdue.edu/477grp12/" />

<!--Content-->
<title>ECE477 Course Documents</title>
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="author" content="George Hadley">
<meta name = "format-detection" content = "telephone=no" />
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!--CSS-->
<link rel="stylesheet" href="css/default.css" type="text/css" media="all" />
<link rel="stylesheet" href="css/responsive.css">
<link rel="stylesheet" href="css/styles.css">
<link rel="stylesheet" href="css/content.css">
<!--[if IE 6]>
<link href="default_ie6.css" rel="stylesheet" type="text/css" />
<![endif]-->

</head>
<body>
<div id="wrapper_site">
    <div id="wrapper_page">
	<!-- Instantiate global site header.-->
	<div id="header"></div>
		<!-- Instantiate site global navigation bar.-->
		<div id="menu"></div>
	
		<!-- Instantiate a page banner image. Page banner images should be 1100x350px and should be located within the local
			img folder located at this directory level. -->
		<div id="banner">
			<img src="Files/img/BannerImgExample.jpg"></img>
		</div>
	
		<!-- Instantiate "tools" needed for a page. Tools are premade functional blocks that can be used to build a page,
			and include things such as a file lister (for listing out homework assignments or tutorials)
		-->
		<div id="content">
            <h2>Progress Report for Jen Isaza</h2>

            <div class="bar">
                <h4>Week:</h4>
                <ul>
                    <li> <h4> <a href="Team/progress/jisaza.html#week1" style="text-decoration:none">&nbsp;1</a> </h4> </li>
                    <li> <h4> <a href="Team/progress/jisaza.html#week2" style="text-decoration:none">&nbsp;2</a> </h4> </li>
                    <li> <h4> <a href="Team/progress/jisaza.html#week3" style="text-decoration:none">&nbsp;3</a> </h4> </li>
                    <li> <h4> <a href="Team/progress/jisaza.html#week4" style="text-decoration:none">&nbsp;4</a> </h4> </li>
                    <li> <h4> <a href="Team/progress/jisaza.html#week5" style="text-decoration:none">&nbsp;5</a> </h4> </li>
                    <li> <h4> <a href="Team/progress/jisaza.html#week6" style="text-decoration:none">&nbsp;6</a> </h4> </li> 
                    <!-- <li> <h4> <a href="Team/progress/jisaza.html#week7" style="text-decoration:none">&nbsp;7</a> </h4> </li> -->
                    <!-- <li> <h4> <a href="Team/progress/jisaza.html#week8" style="text-decoration:none">&nbsp;8</a> </h4> </li> -->
                    <!-- <li> <h4> <a href="Team/progress/jisaza.html#week9" style="text-decoration:none">&nbsp;9</a> </h4> </li> -->
                    <!-- <li> <h4> <a href="Team/progress/jisaza.html#week10" style="text-decoration:none">&nbsp;10</a> </h4> </li> -->
                    <!-- <li> <h4> <a href="Team/progress/jisaza.html#week11" style="text-decoration:none">&nbsp;11</a> </h4> </li> -->
                    <!-- <li> <h4> <a href="Team/progress/jisaza.html#week12" style="text-decoration:none">&nbsp;12</a> </h4> </li> -->
                    <!-- <li> <h4> <a href="Team/progress/jisaza.html#week13" style="text-decoration:none">&nbsp;13</a> </h4> </li> -->
                    <!-- <li> <h4> <a href="Team/progress/jisaza.html#week14" style="text-decoration:none">&nbsp;14</a> </h4> </li> -->
                    <!-- <li> <h4> <a href="Team/progress/jisaza.html#week15" style="text-decoration:none">&nbsp;15</a> </h4> </li> -->
                    <!-- <li> <h4> <a href="Team/progress/jisaza.html#week16" style="text-decoration:none">&nbsp;16</a> </h4> </li> -->
                </ul>
            </div>
            
            <div id="week1">
                  <h4>Week 1:</h4>
            </div>
            <b>Date:</b> Jan. 13, 2017 <br>
            <b>Total hours:</b> 5 <br>
            <b>Description of design efforts:</b><br>
            Syllabus week included standard planning and preliminary work. The final proposal assignment was based off of the initial proposal that was turned in during the previous semester. This final proposal made us begin to think about our overall goals of the project by forming our PSSCs. In order to make the estimated budget, I helped by researching parts costs and creating the table. In order to complete the final proposal, research was done to see how similar projects made their guitar. One that specifically helped us with brainstorming was a senior design project by a youtuber named Andrew Garza. Although the purpose of his guitar is not the same as ours, the insertion of the LEDs on the neck of the guitar led us to our solution of altering and then replacing the neck of the guitar. A picture of his final product is seen below. 
            </br></br>
            <div align="center">
            	<img style="image-orientation: 90deg;" width="70%" src="Team/progress/img/JenImg/Andrew_Garza.png" class="rotate90"> 
      
            </div>
            <br><br>


            
            <div id="week2">
                  <h4>Week 2:</h4>
            </div>
            <b>Date:</b> Jan. 20, 2017 <br>
            <b>Total hours:</b> 9 <br>
            <b>Description of design efforts:</b><br>
            Work for Week 2 mainly consisted of brainstorming and planning with the team. One of the preliminary steps for planning of the project was making our team website after Brian installed Sublime Text as a text editor. This was one of the first times I had dealt with HTML coding, so I was happy to gain more experience with this valuable skill and begin to understand its logic and structure. 
            </br></br>
            Further planning, division of tasks and deciding upon each teammateâ€™s strong suits will help in the future in order to work more efficiently. Many design changes were discussed and are still being decided upon in order to have a clear idea of how we should move forward with the project. One idea that we are especially dwelling upon is how to recognize what note the user plays. We are currently designing a switch matrix system which uses the frets and strings of the guitar as a circuit in itself. A problem that we ran into was the amount of wiring the method will need, since playing a chord will need to result in multiple frets being used. 
            </br></br>
            I also researched which electronic components we will need during this planning phase. I looked into some of the recommended microcontrollers for the project, including the STM Arm Cortex-M3 32-bit, which we decided upon after consideration for what components we would need to use. This microcontroller allows USB 2.0, has 2 ADCs, and power saving modes, which are only a few of the many included features that we will need to use.
            </br></br>
            <div align="center">
            	<img style="image-orientation: 90deg;" width="70%" src="Team/progress/img/JenImg/switch_matrice.png" class="rotate90"> 
      
            </div>
            <br>
             
            <div id="week3">
                  <h4>Week 3:</h4>
            </div>
            <b>Date:</b> Jan. 27, 2017 <br>
            <b>Total hours:</b> 12 <br>
            <b>Description of design efforts:</b><br>
            Week three started by testing the connection of the string to fret switch matrix that we will be using to check if the correct note is played by the user. A 5V, 1A power supply was connected in series to a 1000 ohm resistor and an LED. With the resistor attached to a string, I pressed down on the string to make a connection with the fret while touching the LED to that fret. The LED lit up, meaning the test was a success, and also that touching the string while current ran through it was not a safety hazard. This test was tried on every string to see if the circuit would be complete no matter the thickness of the string. A drawing of the circuit can be seen below. 
            </br></br>
            <div align="center">
            	<img style="image-orientation: 90deg;" width="70%" src="Team/progress/img/JenImg/test_matrix.png"> 
            </div>
            </br></br>	
            Although the safety of pushing down one string at a time was tested, there was still a concern that pushing down all strings at the same time in a bar chord would cause a short accross the whole circuit. To solve this problem, we decided to run current through each string at different times so that even if multiple strings were pressed down, no short would occur. 
            </br></br>
            Another concept that was changed from the original design was the LED array on the frets. After doing some more research into Charlie Plexing, we discovered that this method only allows one LED to be lit up at a time. This could be corrected by blinking the LEDs at different frequencies and tricking the eye to think that multiple LEDs are on at the same time. Although this method would work, we decided to do a simpler method of making a row and column selection system, similar to the switch matrix used for the note selection. All of the negatives of the same row of LEDs would be connected to each other and then each "fret" would be connected in parallel. Similarly, each "string" would model how each column of LEDs would have their positives connected in series. This idea was represented on a breadboard using LEDs and 1k ohm resistors. Using a microcontroller, we may be able to test how this idea could work as a prototype for future implementation.
            </br></br>
            <div align="center">
            	<img style="image-orientation: 90deg;" width="70%" src="Team/progress/img/JenImg/LED_array.png"> 
            </div>
            </br></br>	
            One of the final concepts changed was the method by which we would pick up the vibrations from the strings to signal when the user actually strummed the guitar. The 7BB-20-6L0 Piezo element disc sensor was determined to be our best option after some research into how these vibration sensors would actually pick up the vibrations. Other versions used a bead that would rest on the string and measure the vibrations through movement. This method of measuring vibration could distort the sound though, and possibly create a buzzing sound whenever the user strummed the guitar. The disc sensor, on the other hand, would rest on the bridge of the guitar and measure vibrations picked up by the bridge itself from the strumming. 
            </br></br>
            The microcontroller that was selected and ordered this week was the PIC32MX570F512L. This microcontroller had all of the capabilities we needed with extra features to spare, such as 512 Kbytes of flash memory, 81 I/O pins, and 48 ADC channels. Other features included are bluetooth and USB capability which will be important for the app user interface and the charging of the battery. Next week, I will be delving further into PCB design through Eagle tutorial samples and beginning to design the board with the PIC microcontroller we chose. 

            </br></br>
            <div id="week4">
                  <h4>Week 4:</h4>
            </div>
            <b>Date:</b> Feb. 3, 2017 <br>
            <b>Total hours:</b> 14 <br>
            <b>Description of design efforts:</b><br>
            This week, the team delved further into our own specialties. In order to prepare for the build of our future PCBs, I downloaded Eagle and began many of their tutorials, in addition to Sparkfun tutorials. I have previous experience using DxDesigner, which is a similar PCB editing pregram, but my work mainly focused on efficiency of routing and transferring design specs that were already made. Therefore, I especially focused on design requirements while going through the tutorials. Placement requirements, such as making sure connectors are facing an edge of the board or placing a decoupling capacitor close to the IC, were some of the important details that would have to be considered when designing a board. 
            </br></br>
            <div align="center">
            	<img style="image-orientation: 90deg;" width="50%" src="Team/progress/img/JenImg/Eagle_Tutorial.png"> 
            </div>
            </br></br>	
            </br></br>
            One major difficulty from this week was finding the microcontrollers that we orded (neither the PIC32MX5700F512L-I/PF or -50I/PT) in Eagle. The only PIC32 in Eagle that we could find was the PIC32MX570F512H-50I/PT which has 64 leads instead of 100. However, after counting the number of I/O pins that we would need, we ruled the 64-lead option out. The switch and LED matrices alone would require 56 I/O pins which is above the 49 I/O pin capability of the 64-lead microcontroller. To solve this problem, we need to decrease the number of I/O pins through shift registers or multiplexing, or we need to use the 100 lead microcontroller. We decided to use shift registers for the LED matrix in addition to using the 100 lead microcontroller, in case we end up needing more I/O pins. In order to progress in Eagle, Austin and I will have to create our own microcontroller design and add it to the Eagle library. 
            </br></br>
            The group also made a lot of changes to the overall design of the fretboard. Instead of removing and milling the fretboard, we will now be making the PCB as the fretboard and then putting a clear plastic over the PCB as protection. I came up with the plastic idea after looking at phone screen protectors, so I researched what plastics these protectors are made from. Most phone protectors are made from plastics called PET and TPU, but I also found some vinyl sheeting that might work just as well. Vinyl is also much easier to find in sheets and is cheaper. Difficulties in this plan may come from the separation of the fretboard from the neck of the guitar. In order to weaken the glue, the neck must be heated up so that we can separate the fretboard and the frets. In order to have the frets connect to the PCB, the sides of the PCB would have copper leads coming out of the sides where each fret would be placed. This way, we would be able to have a continuous plastic sheet cover the fretboard, instead of cutting slots in the plastic for each fret. Other concerns deal with attaching the plastic to the fretboard. One idea is to make a side adhesive, which would make the plastic coating permanent. Another idea is making the plastic layer latch down and removable, which would then add the challenge of attaching the plastic to the latch while maintaining comfort for the user. 
            </br></br>
            One of the most helpful ideas this week was making the PCB board double sided. The bottom side would contain all of the parts that may be more pressure sensitive, and the top side would only contain LEDs and frets, which would touch the plastic coating and be pressed by the user. We also investigated different materials that could be used for the coating on guitar strings in order to insulate them. Our prototype for the week proved that the liquid rubber coating we bought would work as advertised and insulate the wire that was dipped in it. One side was connected to power with an LED and the insulated side was just connected to an LED. The side with the power was the only side whose LED lit up, meaning that the rubber did, in fact, insulate the wire.   </br></br>
            <div align="center">
            	<img style="image-orientation: 90deg;" width="50%" src="Team/progress/img/JenImg/Prototype1.png"> 
            </div>
            </br></br>	
            While this test worked, we still have to consider whether the rubber would not fail when bent and attached to the guitar due to the friction between the strings and the bridge. Professor Meyer suggested looking into heat shrink tubing, which he thinks may be more durable than the liquid rubber. After doing some research, I found "Big Bends String Sleeves" which are made to go between the strings and the bridge. However, we are not positive if these sleeves would actually isolate the string based on the "correct" way the sleeves are to be placed, as seen in the picture below. 
            </br></br>	
            <div align="center">
            	<img style="float: left;" width="48%" src="Team/progress/img/JenImg/Big_Bends.png">
            	<img style="float: right;" width="48%" src="Team/progress/img/JenImg/String_Sleeve.png">
            	<p style="clear: both;">
            </div>
            </br></br>	
             <div id="week5">
                  <h4>Week 5:</h4>
            </div>
            <b>Date:</b> Feb. 10, 2017 <br>
            <b>Total hours:</b> 10 <br>
            <b>Description of design efforts:</b><br>
            There was a lot of progress towards preparing for further prototyping this week. All parts were ordered and many arrived, such as string sleeves, the lithium ion battery and its USB port, and an extra guitar neck for prototyping. This extra neck will be used to test the removal process of the fretboard. Unfortunately, the neck that was ordered off of Amazon was a Tele guitar neck instead of a Strat guitar neck. Although the difference is small, we tried to attach the Tele guitar neck and found that it would not be flush with the body of the guitar. The only difference between the two is that the Strat heel is rounded, while the Tele heel is squared off.
             </br></br>
             <div align="center">
            	<img style="image-orientation: 90deg;" width="50%" src="Team/progress/img/JenImg/Tele_Strat.png"> 
            </div>
            </br></br>

            For the Mechanical Overview this week, I compared the two products that have influenced Guitutar the most. Andrew Garza's senior design project especially helped the Guitutar get started with some of the the initial ideas. These ideas eventually evolved into better methods that would be more suitable for our guitar design. Fretlight was a commercial product that had unique features such as a light-up nut that would show when to play open strings, as well as a USB charging port and apps as a user interface. Although we did not base our project off of this design, the Guitutar has evolved separately to become very similar to the Fretlight guitars in terms of functionality. 
            </br></br>	

            This week was especially significant for designing the PCBs. After looking at the different requirements for the PCBs, I measured out the neck of the guitar and split the PCBs into five pieces so that they would meet the 4in length maximum. In order to hide the seams of the PCBs, I made the length of each one end right after a fret. Another difficulty was deciding the shape of the PCBs. Since the guitar neck is trapazoidal, we decided to make rectangular PCBs and then cut off any extra parts to make the trapazoidal shape. Buying rectangular PCBs should save us money so that we do not have to custom order the PCBs. The only worry about this design is that if we need side traces for the fret connections, the cuts will have to be very exact so as not to ruin these traces. Mapping out the PCBs also assured us that the microcontroller would most likely be able to fit on the underside of a middle PCB. This idea will become more clear when we try to lay out all of the traces. Shift registers should help us avoid the problem of having too many traces in the way of the microcontroller and other parts. One downside of having the microcontroller on the bottom of the PCB is that we may not be able to have the necessary decoupling capacitors as close as we would like. As advised in lecture, these decoupling capacitors are most convenient and effective if they are place underneath the microcontroller; however, this will not be possible if the microcontroller is on the back of the PCB. 
             <div align="center">
            	<img style="image-orientation: 90deg;" width="80%" src="Team/progress/img/JenImg/fretboard_PCBs.png"> 
            </div>
            </br></br>
            Since we are unsure if the microcontroller will be able to work well on the back of the PCBs, we decided to design a case that would house the microcontroller on the back of the guitar neck. The case would be glued to the underside of the neck and we would have to wire the micro to the rest of the PCBs from there. Austin was able to design this casing with his AutoCAD experience. Brian also contributed this week by making a prototype program for the microcontroller and dev board that was provided for testing for the PIC32MX570F512L. The program scrolls through a few LEDs in a similar structure to those that we will be using for Guitutar. Another prototype was started by Cole for the future app that we will be using for the user interface. We decided to use the Android app platform since it is one of the most intuitive platforms for users who have never made an app before. Future work for me will be to investigate the necessary components that our microcontroller will need for its stamp board. We will also have to create the schematic symbol for our 100 pin micro, since it is not in Eagle. I was able to go through all of the additional tutorials that were posted through the 477 website, which included the instructions on how to create your own library symbol. We will be able to use the already designed layout for another TQFP 100 pin micro, but we will have to make our own schematic version in order to redraw any pins that are different from the existing 100 pin micro. 
	    </br></br>	
            <div id="week6">
                  <h4>Week 6:</h4>
            </div>
            <b>Date:</b> Feb. 17, 2017 <br>
            <b>Total hours:</b> 10 <br>
            <b>Description of design efforts:</b><br>
		
	     We were able to make a lot of progress this week with the PCB development. After doing different tutorials, I was able to apply what I had learned to this week's tasks of completing a parts library and preliminary schematics design. Austin and I split up different parts designs for the week, so I designed the shift registers, piezo, and USB PowerBoost with its battery. I also designed the LED and shift register schematic below. 
<div align="center">
            	<img style="image-orientation: 90deg;" width="50%" src="Team/progress/img/JenImg/LED_schem.png"> 
            </div>
            </br></br>
We also completed the stamp board design this week, which was created by following the minimum requirements found in the microcontroller datasheet. 
 </br></br>	
            <div align="center">
            	<img style="float: left;" width="35%" src="Team/progress/img/JenImg/micro_min_connections.png">
            	<img style="float: right;" width="65%" src="Team/progress/img/JenImg/stamp_board.png">
            	<p style="clear: both;">
            </div>
            </br></br>	
 Some troubles that we are running into are schematic sizing and not being able to use more than two with the free version of Eagle. We are also worried about future programming of the microcontroller, since the stamp board will not fit within the guitar neck. Future concerns include a possible extra schematic that represents the actual PCBs more accurately. Right now, our schematic includes multiple parts that will not actually be represented on the PCB, such as the switch matrices from the frets and strings, the USB and battery, and the piezo. These parts are were important to include for an overall representation of the design, but are not convenient when transferring the from schematic to layout design. In order to prepare for the layout design, we must double check all connections and clean up the schematics so that the microcontroller is connected to the rest of the parts without the stamp boaard connections. 
</br></br>	
Other difficulties on the software side may affect our hardware design, as well. Brian has been having trouble working with the PIC32 due to different library issues with Harmony. Since there are more example programs with the PIC24, we may have to change to this microcontroller instead. This change would not greatly affect the PCB design, except for new pin connections. The main difference between the two microcontrollers is that the PIC24 is 16bit instead of the 32bit capabilities of the PIC32. 
	     </br></br>	
            <div id="week7">
                  <h4>Week 7:</h4>
            </div>
            <b>Date:</b> Feb. 24, 2017 <br>
            <b>Total hours:</b> 10 <br>
            <b>Description of design efforts:</b><br>	
	This week, I worked to clean up the schematics that we created last week and begin the layouts of the stamp board and PCBs. Last week, we created all of the devices for the whole guitar. While these devices were helpful for planning purposes, they were not transferrable for a layout. The main PCB that was originally created was split into the five PCBs that we will actually be using for the fretboard of the guitar. Each of the PCBs were very similar, except for the first PCB that includes the Bluetooth board and the third PCB which includes the microcontroller. The main schematic was able to be used for the stamp board, so that layout was created first. Some changes that were suggested were cleaning up the capacitor connections under the microcontroller and double checking the Vcap that needs to be 10 microfarads, unlike the other capacitors. 
 </br></br>
            <div align="center">
            	<img style="image-orientation: 90deg;" width="70%" src="Team/progress/img/JenImg/stamp_layout_prelim.png" class="rotate90"> 
      
            </div>
            <br><br>

Most changes for the week happened after the Wednesday lab. The main additions were the resistor packages between the shift registers and the LEDs and the addition of the crystal oscillator schematic. We decided to add resistor packages instead of individual resistors in order to save space when creating the layout board. After looking at the oscillator designs from the PIC32 data sheet, I decided to choose the 16MHz crystal in order to support the high frequency operation that we may use. The crystal schematic is only supplementary, but will be added as a backup in case the internal oscillators do not function at the frequency that we need or with the accuracy that we need. 
 </br></br>
            <div align="center">
            	<img style="image-orientation: 90deg;" width="70%" src="Team/progress/img/JenImg/oscillator_schem.png" class="rotate90"> 
      
            </div>
            <br><br>
After adding these changes and dividing the PCBs, I began preparing for the layout boards. I made new measurements for the placement of the LEDs and dimensions for the boards from the new 22 fret guitar neck that we ordered and added lines on the layout board for guidance. One of the main troubles I've had with this third PCB is that the capacitors can't be on the underside of the PCB because of the LEDs. Since they have to be on the same side of the microcontroller, the capacitors majorly block many of the important pins that we will need for the other PCBs. Another difficult factor in having five PCBs is that Eagle will not let you open multiple schematics at a time, so measurements that will be necessary when connecting PCBs will be very difficult to make accurate. Overall, this week introduced many challenges with the PCB layout, and a lot of redo designs were made. Work for next week will have to start early, since we have so many new additions to make in order to keep on schedule. 
 </br></br>
            <div align="center">
            	<img style="image-orientation: 90deg;" width="70%" src="Team/progress/img/JenImg/PCB3_prelim.png" class="rotate90"> 
      
            </div>
            <br><br>
          
                      
        </div>
	
		<!-- Instantiate global footer. Any changes to the footer should be made through the top-level file "footer.html" -->
		<div id="footer"></div>
    </div>
</div>

<!--JS-->
<script src="js/jquery.js"></script>
<script src="js/jquery-migrate-1.1.1.js"></script>

<script type="text/javascript">
$(document).ready(function() {
    $("#header").load("header.html");
	$("#menu").load("navbar.html");
	$("#footer").load("footer.html");
});
</script>
</body>
</html>
